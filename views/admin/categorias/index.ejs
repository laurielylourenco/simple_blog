<%- include('../../partials/header.ejs') %>
<%- include('../../partials/navbar.ejs') %>
<body>
    <div class="container">

        <hr>
        <h2>Categorias</h2>
        <a class="btn btn-success" href="/admin/categorias/new" >Cria nova categoria</a>
        <hr>

        <table class="table">
    	<thead>
    		
    		<tr>
    			<th>ID</th>
    			<th>Titulo</th>
    			<th>Slug</th>
    			<th>Ações</th>
    		</tr>
    	</thead>
    	<tbody>
    		
    		<% categories.forEach(category => { %>
				<tr>
    			<th><%= category.id %></th>
    			<th><%= category.title %></th>
    			<th><%= category.slug %></th>
    			<th>
    				
    			<a class="btn btn-warning" href="/admin/categorias/update/<%= category.id %>" style="display: inline;" >Editar</a>
    				

    				<form method="POST" action="/categorias/delete" style="display: inline;" 
    				onsubmit="confDelete(event,this)">
    					<input type="hidden" name="id" value="<%= category.id %>">
    					<button class="btn btn-danger" >Deletar</button>
    				</form>
    				
    			</th>
    		</tr>
    		<%  }) %>
    	</tbody>
    </table>
    </div>
    

</body>
<script type="text/javascript">
	function  confDelete(event,form) {
		event.preventDefault(); // impedir que form seja enviado
		var de = confirm("Vc quer deletar essa categoria?")
		
		if(de){
			form.submit()
		}
	}
</script>

<%- include('../../partials/footer.ejs') %>